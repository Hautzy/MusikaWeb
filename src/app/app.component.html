<div style="width:800px; margin:0 auto">
    <h1>MusikaWeb</h1>
    <canvas #canvas width="800" height="256"></canvas>
    <div>
        <button (click)="playButtonClicked()" [disabled]="isPlaying">▶</button>
        <button (click)="pausePlayback()" [disabled]="!isPlaying">||</button>
        <button (click)="generatePlayback()">▶|</button>
    </div>
    <details><summary>How do I use this?</summary>
        Make sure you are on a computer; a smartphone will likely not suffice. Press the play button to start. The first time you click it, it will take a while to load. Press the pause button to pause playback, and the skip button to switch to a different piece (which will again take some time to load). Watch your battery if your device is not plugged in.
    </details>
    <details><summary>Where does the music come from?</summary>
        Everything you hear is generated by a neural network running in your web browser. The neural network, in turn, was trained on electronic dance music from <a href="https://jamendo.com">Jamendo.com</a> published under Creative Commons licenses.
    </details>
    <details><summary>How does it work?</summary>
        The neural network generating the music was done by Marco Pasini, described in his paper <a href="https://arxiv.org/abs/2208.08706">Musika! Fast Infinite Waveform Music Generation</a>. For this web site, <a href="https://hautzy.com/">Julian Hautzmayer</a> converted it to run via TensorFlow.js, using an <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">MDN example</a> for the visualization. The network generates chunks of about 23 seconds, based on a latent coordinate system that helds 64 dimensions fixed and slowly varies the other 64 dimensions over time, allowing it to produce chunks that seamlessly fit together. Every 23 seconds, a new chunk is computed and scheduled for playback. When clicking the skip button, the 64 fixed dimensions are replaced by new random values, thus moving to a different style and tempo.
    </details>
</div>
